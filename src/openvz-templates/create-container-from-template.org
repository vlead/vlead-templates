#+TITLE: Create container from a OpenVZ template
#+AUTHOR: VLEAD
#+DATE: [2017-11-06 Mon]
#+SETUPFILE: ./org-templates/level-0.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction
  This document lists all the steps to create a container
  from a given template. 

* Create container from template
** Create the machine from a template
   1. Download the appropriate template for your given
      requirement. 
      #+BEGIN_EXAMPLE
      wget <url-of-template>
      #+END_EXAMPLE

      #+BEGIN_EXAMPLE
      wget http://download.openvz.org/template/precreated/centos-6-x86-minimal.tar.gz
      #+END_EXAMPLE

   2. Create a machine with the above template
      
      #+BEGIN_EXAMPLE
      vzctl create <ctid>  --ostemplate <ostemplate> --diskspace <diskspace> --hostname <hostname> --ipadd <ipaddress>
      #+END_EXAMPLE
      
      Where =<ostemplate>= is name of the template file
      without =.tar.gz=. In above step(1) <ostemplate> is
      =centos-6-x86-minimal=

      #+BEGIN_EXAMPLE
      vzctl create 1245  --ostemplate centos-6-x86-minimal --diskspace 10G:15.0G --hostname centos-template.vlabs.ac.in --ipadd 10.4.12.45
      #+END_EXAMPLE

  3.  Start the newly created container

     #+BEGIN_EXAMPLE
     vzctl start <ctid>
     #+END_EXAMPLE

     #+BEGIN_EXAMPLE
     vzctl start 1245
     #+END_EXAMPLE

  4. Login to the machine
     #+BEGIN_EXAMPLE
     vzctl enter <ctid>
     #+END_EXAMPLE

     #+BEGIN_EXAMPLE
     vzctl enter 1245
     su -
     #+END_EXAMPLE

** Update the machine
   After creation of machine, set the proxy and install all
   updates.

   Steps:
   1. Set proxy
      #+BEGIN_EXAMPLE
      export http_proxy="http://proxy.iiit.ac.in:8080"
      export https_proxy="http://proxy.iiit.ac.in:8080"
      #+END_EXAMPLE
   2. Update 
      #+BEGIN_EXAMPLE
       yum update -y
      #+END_EXAMPLE

