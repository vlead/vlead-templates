#+TITLE: Create OpenVZ template from existing OpenVZ container
#+AUTHOR: VLEAD
#+DATE: [2017-08-24 Thur]
#+SETUPFILE: ./org-templates/level-0.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil

* Introduction
  This document describes the steps for creating OpenVZ
  template from a running container. 

* Steps to create OpenVZ template
  
  1. Comment the default network settings at
     =/etc/sysconfig/newtwork= as shown below.  The
     disabling gateway is to ensure that the gateway used in
     this container in not applied to a new container
     created from this template.
     #+BEGIN_EXAMPLE
     #NETWORKING="yes"                                                                                                      
     #GATEWAYDEV="venet0"                                                                                                   
     #NETWORKING_IPV6="yes"                                                                                                 
     #IPV6_DEFAULTDEV="venet0" 
     #+END_EXAMPLE

  2. Exit the from the machine
     #+BEGIN_EXAMPLE
     exit
     #+END_EXAMPLE

  3. Stop the container
     #+BEGIN_EXAMPLE
     vzctl stop <CTID>
     #+END_EXAMPLE

  4. Delete the IP of the container
     #+BEGIN_EXAMPLE
     vzctl set <CTID> --ipdel <ipaddress> --save
     #+END_EXAMPLE

  5. Create =tar.gz= file
     #+BEGIN_EXAMPLE
     cd /vz/private/<CTID>
     tar -cvzpf <name-of-tempalte> .
     #+END_EXAMPLE
